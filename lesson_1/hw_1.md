1. Нарисуйте архитектуру ETL процесса для сбора и анализа данных компанией которая хочет провести маркетинговую кампанию, используя app.diagrams.net. Сделайте описание почему вы считаете что архитектура должна выглядеть именно так.

![](.hw_1_images/e0fedb0c.png)

![](.hw_1_images/a127bf54.png)

Использование архитектуры на базе WSO2 может быть предпочтительным выбором.
- подходит для интеграции с широким спектром источников данных и сервисов.
- подходит для средних и крупных проектов с умеренными требованиями к производительности.
- имеет инструменты для обработки данных в реальном времени
- имеет мощные возможности для управления API, включая контроль доступа, мониторинг и аналитику.
- меньше сложность внедрения по сравнению c системами обмена очередей RabbitMQ / Kafka и Airflow, так как предоставляет комплексные решения «из коробки».
- подходит для компаний, которые нуждаются в мощных возможностях интеграции и управления API и имеют умеренные требования к производительности и обработке данных в реальном времени.

![](.hw_1_images/99f1309e.png)

2. Постройте реляционную и иерархическую модели данных для магазина который продает телефоны.

![](.hw_1_images/2aae162b.png)

![](.hw_1_images/65123aa4.png)

3. Определите в какой нормальной форме данная таблица, приведите её ко 2 и 3 нормальным формам последовательно.

### Исходная таблица

| Employee_ID | Name  | Job_Code | Job       | City_code | Home_city |
|-------------|-------|----------|-----------|-----------|-----------|
| E001        | Alice | J01      | Chef      | 26        | Moscow    |
| E001        | Alice | J02      | Waiter    | 26        | Moscow    |
| E002        | Bob   | J02      | Waiter    | 56        | Perm      |
| E002        | Bob   | J03      | Bartender | 56        | Perm      |
| E003        | Alice | J01      | Chef      | 56        | Perm      |

### Анализ нормализации

#### 1NF (Первая нормальная форма)

Таблица находится в первой нормальной форме (1NF), если в ней отсутствуют повторяющиеся группы, все данные в одной колонке могут быть только одного типа и все значения, хранимые в ней, неделимы (атомарны)

Исходная таблица находится в 1NF.

#### 2NF (Вторая нормальная форма)

Возьмем сформированную таблицу после применения 1NF.

Таблица находится во второй нормальной форме (2NF), если она удовлетворяет следующим условиям:
- Находится в первой нормальной форме (1NF).
- Все неключевые атрибуты полностью зависят от всего составного первичного ключа, а не от его части.

В данном случае первичный ключ составной: (Employee_ID, Job_Code). Атрибуты Name, City_code и Home_city зависят только от Employee_ID, а не от всего составного ключа. Таким образом, таблица не находится во 2NF.

### Функциональные зависимости от ключевых атрибутов

1. (Employee_ID, Job_Code) -> Job
2. Employee_ID -> Name
3. Employee_ID -> City_code
4. Employee_ID -> Home_city
5. City_code -> Home_city

### Анализ зависимостей

- Атрибут Name зависит только от части составного ключа - от атрибута Employee_ID. Зная идентификатор сотрудника, можно определить его имя. Это частичная зависимость.
- Атрибут Home_city зависит только от атрибута City_code. Это также частичная зависимость.

Наличие частичных зависимостей говорит о том, что таблица не находится во второй нормальной форме. Для перехода к этой форме необходимо переместить атрибуты, которые не входят в первичный ключ и имеют частичные зависимости, в новые таблицы вместе с копией той части первичного ключа, от которой они функционально зависят.

#### Приведение к 2NF

*Таблица 1*: Employees

| Employee_ID | Name  | City_code |
|-------------|-------|-----------|
| E001        | Alice | 26        |
| E002        | Bob   | 56        |
| E003        | Alice | 56        |

*Таблица 2*: Cities

| City_code | Home_city |
|-----------|-----------|
| 26        | Moscow    |
| 56        | Perm      |

*Таблица 3*: Employee_Jobs

| Employee_ID | Job_Code | Job       |
|-------------|----------|-----------|
| E001        | J01      | Chef      |
| E001        | J02      | Waiter    |
| E002        | J02      | Waiter    |
| E002        | J03      | Bartender |
| E003        | J01      | Chef      |

Таблицы находятся во второй нормальной форме, так как все неключевые атрибуты полностью зависят от всего составного первичного ключа или от простого ключа.

#### 3NF (Третья нормальная форма)

Таблица находится в третьей нормальной форме (3NF), когда она находится во второй нормальной форме, все неключевые атрибуты зависят только от первичного ключа и не имеют транзитивных зависимостей.

- Таблицы Employees, Cities и Employee_Jobs уже находятся в 3NF после приведения к 2NF, так как все неключевые атрибуты зависят только от первичного ключа и нет транзитивных зависимостей.

#### Итоговые таблицы в 3NF:

*Таблица 1*: Employees

| Employee_ID | Name  | City_code |
|-------------|-------|-----------|
| E001        | Alice | 26        |
| E002        | Bob   | 56        |
| E003        | Alice | 56        |

*Таблица 2*: Cities

| City_code | Home_city |
|-----------|-----------|
| 26        | Moscow    |
| 56        | Perm      |

*Таблица 3*: Employee_Jobs

| Employee_ID | Job_Code | Job       |
|-------------|----------|-----------|
| E001        | J01      | Chef      |
| E001        | J02      | Waiter    |
| E002        | J02      | Waiter    |
| E002        | J03      | Bartender |
| E003        | J01      | Chef      |

Таблицы Job_Code-Job и Employee_ID-Name не были нормализованы в контексте этого анализа, потому что текущая структура уже удовлетворяет требованиям 2NF и 3NF. Дополнительная нормализация этих зависимостей не привнесет значительного улучшения данных, и функциональные зависимости между атрибутами уже обеспечивают необходимую целостность и минимизацию избыточности.
Таким образом, исходная таблица была успешно нормализована до 3NF через 2NF, учитывая все необходимые функциональные зависимости.
